{% extends "layout.html" %}

{% block title %}
    Dashboard
{% endblock %}

{% block main %}
    <div class="mb-5">
        <h1>Your Financial Dashboard</h1>
        <p class="lead">Overview of your financial status and recent transactions.</p>
        
        <div class="row mt-4">
            <div class="col-md-4">
                <div class="card text-white bg-success">
                    <div class="card-body">
                        <h5 class="card-title">Total Income</h5>
                        <h3>{{ income | usd }}</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-white bg-danger">
                    <div class="card-body">
                        <h5 class="card-title">Total Expenses</h5>
                        <h3>{{ expenses | usd }}</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-white {% if balance >= 0 %}bg-primary{% else %}bg-warning{% endif %}">
                    <div class="card-body">
                        <h5 class="card-title">Balance</h5>
                        <h3>{{ balance | usd }}</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <h3>Recent Transactions</h3>
            {% if transactions %}
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Title</th>
                                <th>Type</th>
                                <th>Category</th>
                                <th>Amount</th>
                                <th>Description</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for transaction in transactions %}
                                <tr>
                                    <td>{{ transaction.date }}</td>
                                    <td>{{ transaction.title }}</td>
                                    <td>
                                        <span class="badge {% if transaction.type == 'income' %}bg-success{% else %}bg-danger{% endif %}">
                                            {{ transaction.type.title() }}
                                        </span>
                                    </td>
                                    <td>{{ transaction.category }}</td>
                                    <td>{{ transaction.amount | usd }}</td>
                                    <td>{{ transaction.description or "-" }}</td>
                                    <td>
                                        <a href="/manage?id={{ transaction.id }}" class="btn btn-sm btn-outline-primary">Edit</a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="mt-3">
                    <a href="/history" class="btn btn-primary">View All Transactions</a>
                    <a href="/add" class="btn btn-success">Add New Transaction</a>
                </div>
            {% else %}
                <div class="alert alert-info">
                    <h4>Get Started!</h4>
                    <p>You haven't added any transactions yet. Start tracking your finances by adding your first transaction.</p>
                    <a href="/add" class="btn btn-success">Add Your First Transaction</a>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}